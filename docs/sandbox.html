<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="stylesheet" href="51.css"><style>#divEditor{min-height:18px;margin:0 0 0 5px;padding:4px 0 14px 0}#divResponse{font-family:Monaco,Menlo,'Ubuntu Mono',Consolas,source-code-pro,monospace;font-size:12px;line-height:20px;white-space:pre;color:#000;padding:3px 500px 3px 500px;margin:0 -500px 0 -500px}#divGT{font-family:Monaco,Menlo,'Ubuntu Mono',Consolas,source-code-pro,monospace;font-size:16px;white-space:pre;color:#000;user-select:none;z-index:5000;position:absolute;font-weight:700}</style></head><body><did id="divBGHeader"></did><did id="divBGBillboard"></did><div id="divHeader"><div id="divMenuItems"><a href="index.html">51 Bank</a><a id="hldMenuItem" href="sandbox.html">Sandbox</a><a href="dashboard.html">Dashboard</a><a href="docs.html">Docs</a></div><div id="divBillboard"></div></div><div id="divMain"><br><div id="divGT">&gt;</div><div id="divEditor"></div><div id="divResponse"></div><div id="divFooter"></div></div><script src="scripts/createParseCurl.js"></script><script src="scripts/createRestEngine.js"></script><script src="scripts/createBillboard.js"></script><script src="scripts/createSTPEngine.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.6.0/ace.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.6.0/ext-language_tools.min.js"></script><script>const editor=ace.edit("divEditor");ace.config.setModuleUrl("ace/mode/curl","plugins/ace.mode.curl.js"),editor.setOption("mode","ace/mode/curl"),window.onmousedown=function(e){const t=e.target;"HTML"!==t.tagName&&t!==divGT&&t!==divMain||setTimeout((function(){editor.focus()}),0)};{window.addEventListener("beforeunload",(function(e){sessionStorage.setItem("editorContent",editor.getValue())}));const e=sessionStorage.getItem("editorContent");e&&editor.setValue(e)}const curlEditorAnalyzer={synchUp:function(){curlEditorAnalyzer.hasCurl=!1,curlEditorAnalyzer.hasMinusX=!1,curlEditorAnalyzer.isEndPointForAccounts=!1,curlEditorAnalyzer.isEndPointForCustomers=!1,curlEditorAnalyzer.isEndPointForPayments=!1;const e=editor.session.doc.$lines;for(const t of e)-1!==t.indexOf("-X")&&(curlEditorAnalyzer.hasMinusX=!0),-1===t.indexOf("curl ")&&-1==t.indexOf("curl\\")&&"curl"!==t||(curlEditorAnalyzer.hasCurl=!0),-1!==t.indexOf("api.51bank.io/customers")&&(curlEditorAnalyzer.isEndPointForCustomers=!0),-1!==t.indexOf("api.51bank.io/accounts")&&(curlEditorAnalyzer.isEndPointForAccounts=!0),-1!==t.indexOf("api.51bank.io/payments")&&(curlEditorAnalyzer.isEndPointForPayments=!0)},hasCurl:!1,hasMinusX:!1,isEndPointForAccounts:!1,isEndPointForCustomers:!1,isEndPointForPayments:!1},autocomplete=function(){const e=[{value:"-X get",score:2},{value:"-X post",score:2},{value:"-X patch",score:2},{value:"-X delete",score:2}],t=[{value:"-d firstName=",score:1,meta:"(customer)"},{value:"-d middleName=",score:1,meta:"(customer)"},{value:"-d lastName=",score:1,meta:"(customer)"},{value:"-d email=",score:1,meta:"(customer)"},{value:"-d nationality=",score:1,meta:"(customer)"},{value:"-d dateOfBirth=",score:1,meta:"(customer)"},{value:"-d address=",score:1,meta:"(customer)"}],o=[{value:"-d customerId=",score:1,meta:"(account)"},{value:"-d type=personal",score:1,meta:"(account)"},{value:"-d offsetLimit=",score:1,meta:"(account)"}],n=[{value:"-d debtorId=",score:1,meta:"(payment)"},{value:"-d creditorId=",score:1,meta:"(payment)"},{value:"-d amount=",score:1,meta:"(payment)"},{value:"-d currency=",score:1,meta:"(payment)"},{value:"-d idempotencyKey=",score:1,meta:"(payment)"}],s=[].concat(t,o,n);return{X:e,dCustomers:t,dAccounts:o,dPayments:n,d:s,_:e.concat(s),XdCustomers:e.concat(t),XdAccounts:e.concat(o),XdPayments:e.concat(n)}}();editor.setFontSize(16),editor.container.style.lineHeight="1.6",editor.renderer.updateFontSize();document.styleSheets[0].insertRule(".ace_autocomplete { width: 350px !important; }");editor.setOptions({enableBasicAutocompletion:[{identifierRegexps:[/[a-zA-Z_0-9\//\=\.\-\u00A2-\uFFFF]/],getCompletions:(e,t,o,n,s)=>{if(curlEditorAnalyzer.synchUp(),n.startsWith("debtorId=")){s(null,bank.accounts.map((e=>({value:"debtorId="+e.id,score:1,meta:""}))))}else if(n.startsWith("creditorId=")){s(null,bank.accounts.map((e=>({value:"creditorId="+e.id,score:1,meta:""}))))}else if(n.startsWith("customerId=")){s(null,bank.customers.map((e=>({value:"customerId="+e.id,score:1,meta:""}))))}else if(!1===curlEditorAnalyzer.hasCurl&&e.getValue().trim().startsWith("."))s(null,[{value:".acc",score:2,meta:"template"},{value:".cust",score:2,meta:"template"},{value:".pay",score:2,meta:"template"}]);else if(curlEditorAnalyzer.hasCurl&&n.startsWith("-"))n.startsWith("-X")?s(null,autocomplete.X):n.startsWith("-d")||curlEditorAnalyzer.hasMinusX?curlEditorAnalyzer.isEndPointForCustomers?s(null,autocomplete.dCustomers):curlEditorAnalyzer.isEndPointForAccounts?s(null,autocomplete.dAccounts):curlEditorAnalyzer.isEndPointForPayments?s(null,autocomplete.dPayments):s(null,autocomplete.d):curlEditorAnalyzer.isEndPointForCustomers?s(null,autocomplete.XdCustomers):curlEditorAnalyzer.isEndPointForAccounts?s(null,autocomplete.XdAccounts):curlEditorAnalyzer.isEndPointForPayments?s(null,autocomplete.XdPayments):s(null,autocomplete._);else if(n.startsWith("//api.51bank.io/customers/")&&bank.customers.length<50){s(null,bank.customers.map((e=>({value:"//api.51bank.io/customers/"+e.id,score:1,meta:""}))))}else{if(n.startsWith("//api.51bank.io/accounts/")&&bank.accounts.length<50){const e=bank.accounts.map((e=>({value:"//api.51bank.io/accounts/"+e.id,score:1,meta:""})));return e.push({value:"//api.51bank.io/accounts/ ",score:2}),void s(null,e)}!1!==curlEditorAnalyzer.hasCurl||s(null,[{value:"curl https://api.51bank.io/accounts",score:2,meta:""},{value:"curl https://api.51bank.io/customers",score:2,meta:""},{value:"curl https://api.51bank.io/payments",score:2,meta:""}])}}}],enableLiveAutocompletion:!0,showGutter:!1,maxLines:1/0,highlightActiveLine:!1,showPrintMargin:!1});const parseCurl=createParseCurl({isValidURL:function(e){return e.startsWith("https://")&&(e=e.substring(8)),e.startsWith("http://")&&(e=e.substring(7)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),"api.51bank.io/instructions"===e||("api.51bank.io/customers"===e||("api.51bank.io/accounts"===e||("api.51bank.io/payments"===e||(!!e.startsWith("api.51bank.io/customers/")||(!!e.startsWith("api.51bank.io/accounts/")||!!e.startsWith("api.51bank.io/payments/"))))))}});function createRandomIdempotencyKey(){const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let t="";for(let o=0;o<16;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function createRandomDateOfBirth(){return new Date(Math.floor(32*Math.random()*365*24*60*60*1e3)).toISOString().split("T")[0]}editor.session.on("change",(function(e){divResponse.style.opacity=.7,divEditor.style.height=editor.renderer.lineHeight*editor.session.doc.getLength()+"px",editor.resize();{const e=editor.session.doc.$lines;let t=!0;for(let o=0;o<e.length-1;o++){const n=e[o];t&&!1===/\S/.test(n)||(t=!1,n.endsWith("\\")||(e[o]+=" \\"))}}".pay"==editor.getValue().trim()&&(editor.setValue("curl https://api.51bank.io/payments -Xpost \\\n  -d debtorId= \\\n  -d creditorId= \\\n  -d amount=1000 \\\n  -d currency=GBP \\\n  -d idempotencyKey="+createRandomIdempotencyKey()),editor.clearSelection()),".acc"==editor.getValue().trim()&&(editor.setValue("curl https://api.51bank.io/accounts -Xpost \\\n -d customerId= \\\n -d type=personal"),editor.clearSelection()),".cust"==editor.getValue().trim()&&(editor.setValue("curl https://api.51bank.io/customers -Xpost \\\n-d firstName=\\\n-d lastName=\\\n-d email= \\\n-d nationality=GB \\\n-d dateOfBirth="+createRandomDateOfBirth()+' \\\n-d address="/GB/10 Downing Street/London/SW1A 2AA"'),editor.clearSelection()),setTimeout((()=>editor.execCommand("startAutocomplete")))})),editor.focus(),editor.navigateFileEnd(),editor.commands.bindKey("enter",(()=>{divResponse.style.borderTop=divResponse.style.borderBottom="1px solid #f5c6cb",divResponse.style.color="orange",divResponse.innerHTML="⚠ Warning: the system is synching up. Wait a few seconds before trying again.</div>"}));const bank={customers:[],accounts:[],payments:[]},restEngine=createRestEngine({bank:bank,parseCurl:parseCurl});!async function(){const e=restEngine.getLSLoader();if(e.length<101)for(let o=0;o<e.length;o++)await e.next();else{async function t(e){return new Promise((t=>setTimeout(t,e)))}const n=document.createElement("div");n.style.position="absolute",n.style.top="80px",n.style.left=0,n.style.height="2px",n.style.background="black",document.body.appendChild(n);for(let s=0;s<e.length;s++)await e.next(),await t(0),n.style.width=100*(s+1)/e.length+"%";document.body.removeChild(n)}divBillboard.appendChild(createBillboard({bank:bank})),createSTPEngine({bank:bank,parseCurl:parseCurl,restEngine:restEngine}),editor.commands.bindKey("enter",(async function(){divResponse.style.color="",divResponse.style.opacity="";const e=editor.getValue(),t=parseCurl(e);if(t.error)return divResponse.style.borderTop=divResponse.style.borderBottom="1px solid #f5c6cb",divResponse.style.color="red",void(divResponse.innerHTML="⚠ Error:"+t.error+'<div><a href="troubleshoot.curl.not.executed.html">troubleshoot this error</a></div>');const o=await restEngine.executeRequest(t),n=o.httpStatusCode,s=o.payload;n>=200&&n<299?(divResponse.style.borderTop=divResponse.style.borderBottom="",divResponse.innerHTML='<div style="float:right;font-weight:bold;color:green">http '+n+"</div>"+JSON.stringify(s,null,2)):(divResponse.style.borderTop=divResponse.style.borderBottom="1px solid red",divResponse.innerHTML='<div style="float:right;font-weight:bold;color:red">http '+n+"</div>"+JSON.stringify(s,((e,t)=>void 0===t?null:t),2))}))}()</script></body></html>